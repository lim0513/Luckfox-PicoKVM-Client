<Window x:Class="PicoKVM_Client.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:PicoKVM_Client"
    xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
    mc:Ignorable="d"
    Title="PicoKVM Client" Height="600" Width="1024"
    KeyDown="Window_KeyDown"
    Activated="Window_Activated"
    Deactivated="Window_Deactivated"
    Loaded="Window_Loaded"
    Closed="Window_Closed"
    Background="#FF1E1E1E">
<Window.Resources>
    <DropShadowEffect x:Key="DropShadowEffect" ShadowDepth="2" BlurRadius="5" Opacity="0.8"/>
</Window.Resources>
    
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- 工具栏 -->
    <Border x:Name="toolBarPlaceholder" Grid.Row="0" Background="#FF2D2D30" BorderBrush="#FF3F3F46" BorderThickness="0,0,0,1">
        <StackPanel Orientation="Horizontal" Margin="10">
            <TextBlock Text="KVM地址:" VerticalAlignment="Center" Margin="0,0,5,0" Foreground="White"/>
            <TextBox x:Name="txtKvmUrl" Width="250" VerticalAlignment="Center"/>
            <Button x:Name="btnConnect" Content="连接" Width="80" Margin="10,0,0,0" Click="BtnConnect_Click"/>
            <Button x:Name="btnDisconnect" Content="断开" Width="80" Margin="10,0,0,0" Click="BtnDisconnect_Click" IsEnabled="False"/>
            <CheckBox x:Name="chkFullscreen" Content="全屏 (F12)" VerticalAlignment="Center" Margin="20,0,0,0" 
                      Foreground="White" Checked="ChkFullscreen_Changed" Unchecked="ChkFullscreen_Changed"/>
        </StackPanel>
    </Border>

    <!-- WebView2 显示区域 -->
    <Border x:Name="videoBorder" Grid.Row="1" Background="Black" Margin="5">
        <Grid>
            <wv2:WebView2 x:Name="webView" 
                          Visibility="Collapsed"
                          DefaultBackgroundColor="Black"/>
            <Canvas x:Name="canvasOverlay">
                <TextBlock x:Name="txtStatus" Text="未连接" Foreground="White" 
                           Canvas.Left="20" Canvas.Top="20"
                           FontSize="20" FontWeight="Bold"
                           Effect="{StaticResource DropShadowEffect}"/>
            </Canvas>
        </Grid>
    </Border>

    <!-- 状态栏 -->
    <Border x:Name="statusBar" Grid.Row="2" Background="#FF007ACC" BorderThickness="0">
        <StatusBar Background="Transparent">
            <StatusBarItem>
                <TextBlock x:Name="txtStatusBar" Text="就绪 - 使用WebView2模式" Foreground="White"/>
            </StatusBarItem>
        </StatusBar>
    </Border>
</Grid>
</Window>
