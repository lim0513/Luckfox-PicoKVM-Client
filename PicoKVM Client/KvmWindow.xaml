<Window x:Class="PicoKVM_Client.KvmWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
    Title="PicoKVM" Height="600" Width="1024" MinHeight="300" MinWidth="400"
    Icon="app.ico"
    WindowStyle="None" AllowsTransparency="True" ResizeMode="CanResizeWithGrip"
    KeyDown="Window_KeyDown"
    Activated="Window_Activated"
    Deactivated="Window_Deactivated"
    Closing="Window_Closing"
    Background="{DynamicResource MaterialDesign.Brush.Background}"
    FontFamily="Microsoft YaHei"
    TextElement.Foreground="{DynamicResource MaterialDesign.Brush.Foreground}"
    TextElement.FontSize="12">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="32" GlassFrameThickness="0" ResizeBorderThickness="12" CornerRadius="8"/>
    </WindowChrome.WindowChrome>

    <Border x:Name="rootBorder" CornerRadius="8" BorderBrush="{DynamicResource MaterialDesign.Brush.Primary}" BorderThickness="1" Margin="4">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- 标题栏 -->
            <materialDesign:ColorZone x:Name="titleBar" Grid.Row="0" Mode="PrimaryDark" Padding="8,4">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Right" Orientation="Horizontal" WindowChrome.IsHitTestVisibleInChrome="True">
                        <TextBlock Text="F12 全屏" FontSize="10" VerticalAlignment="Center" Margin="0,0,4,0" Opacity="0.5"/>
                        <ToggleButton x:Name="tglTopmost"
                              Style="{StaticResource PinToggleButton}"
                              Padding="8,4" Height="26" Width="34"
                              ToolTip="置顶"
                              Checked="TglTopmost_Changed" Unchecked="TglTopmost_Changed">
                            <materialDesign:PackIcon Kind="Pin" Width="14" Height="14"/>
                        </ToggleButton>
                        <Button Click="BtnMinimize_Click" Style="{StaticResource MaterialDesignFlatButton}"
                        Padding="8,4" Height="26" Width="34" Foreground="White">
                            <materialDesign:PackIcon Kind="WindowMinimize" Width="14" Height="14"/>
                        </Button>
                        <Button Click="BtnFullscreen_Click" Style="{StaticResource MaterialDesignFlatButton}"
                        Padding="8,4" Height="26" Width="34" Foreground="White" ToolTip="全屏 (F12)">
                            <materialDesign:PackIcon x:Name="iconFullscreen" Kind="WindowMaximize" Width="14" Height="14"/>
                        </Button>
                        <Button Click="BtnClose_Click" Style="{StaticResource MaterialDesignFlatButton}"
                        Padding="8,4" Height="26" Width="34" Foreground="White">
                            <materialDesign:PackIcon Kind="WindowClose" Width="14" Height="14"/>
                        </Button>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <materialDesign:PackIcon Kind="Monitor" Width="16" Height="16" Margin="0,0,8,0" VerticalAlignment="Center"/>
                        <TextBlock x:Name="txtTitle" Text="PicoKVM" FontSize="12" VerticalAlignment="Center"/>

                        <TextBlock x:Name="txtCaptureStatus" Text="" FontSize="11" VerticalAlignment="Center" Margin="12,0,0,0" Opacity="0.7"/>
                    </StackPanel>
                </DockPanel>
            </materialDesign:ColorZone>

            <!-- WebView2 -->
            <wv2:WebView2 x:Name="webView" Grid.Row="1" DefaultBackgroundColor="Black"/>
        </Grid>
    </Border>
</Window>
